syntax = "proto3";
package kvraft;

option go_package = "./kvpb";

enum Error {
    ERR_UNKNOWN = 0;

    OK = 1;
    ERR_NO_KEY = 2;
    ERR_WRONG_LEADER = 3;
    ERR_TIMEOUT = 4;
}

message PutAppendArgs {
    string key = 1;
    string value = 2;
    string op = 3;
    int64 clientId = 4;
    int64 seqId = 5;
}

message PutAppendReply {
    Error err = 1;
}
message GetArgs {
    string key = 1;
    int64 clientId = 2;
    int64 seqId = 3;
}

message GetReply {
    string value = 1;
    Error err = 2;
}

message Op {
    string Operation = 1;  // "Get", "Put", "Append"
    string Key = 2;
    string Value = 3;
    int64 ClientId = 4;
    int64 SeqId = 5;
}

service RaftKV {
    rpc Get(GetArgs) returns (GetReply);
    rpc PutAppend(PutAppendArgs) returns (PutAppendReply);
}